from PIL import Image
import numpy as np

def extract_non_written_regions(image_path, output_path):
    # Open the image
    img = Image.open(image_path)

    # Convert the image to grayscale
    img_gray = img.convert('L')

    # Convert the image to a NumPy array
    img_array = np.array(img_gray)

    # Find regions where pixel levels are different than the written parts
    non_written_regions = np.where(img_array < 255)  # Assuming written parts are white (pixel level 255)

    # Get the bounding box of the non-written regions
    bbox = (
        min(non_written_regions[1]),
        min(non_written_regions[0]),
        max(non_written_regions[1]),
        max(non_written_regions[0])
    )

    # Crop the image to the bounding box
    img_cropped = img.crop(bbox)

    # Save the extracted region
    img_cropped.save(output_path)

# Example usage
input_image_path = "input_image.png"
output_image_path = "output_non_written_region.png"

extract_non_written_regions(input_image_path, output_image_path)
